-- GGH PROTECTION UI v1.0 - Рабочий интерфейс защиты

local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Создаем интерфейс
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "GGH_Protection_UI"
ScreenGui.Parent = CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- Главное окно
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 25, 35)
MainFrame.BorderSizePixel = 0
MainFrame.Position = UDim2.new(0.7, 0, 0.3, 0)
MainFrame.Size = UDim2.new(0, 400, 0, 500)
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = MainFrame

-- Верхняя панель
local TopBar = Instance.new("Frame")
TopBar.Name = "TopBar"
TopBar.Parent = MainFrame
TopBar.BackgroundColor3 = Color3.fromRGB(30, 40, 55)
TopBar.Size = UDim2.new(1, 0, 0, 50)

local TopCorner = Instance.new("UICorner")
TopCorner.CornerRadius = UDim.new(0, 10)
TopCorner.Parent = TopBar

-- Заголовок
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Parent = TopBar
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(0.7, 0, 1, 0)
Title.Position = UDim2.new(0.05, 0, 0, 0)
Title.Font = Enum.Font.GothamBold
Title.Text = "GGH PROTECTION v1.0"
Title.TextColor3 = Color3.fromRGB(0, 200, 255)
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Кнопка закрытия
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Parent = TopBar
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(0.92, 0, 0.5, -15)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Text = "✕"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 18
CloseButton.AutoButtonColor = false

-- Контент
local Content = Instance.new("Frame")
Content.Name = "Content"
Content.Parent = MainFrame
Content.BackgroundTransparency = 1
Content.Position = UDim2.new(0, 10, 0, 60)
Content.Size = UDim2.new(1, -20, 1, -70)

-- Статус защиты
local StatusFrame = Instance.new("Frame")
StatusFrame.Name = "StatusFrame"
StatusFrame.Parent = Content
StatusFrame.BackgroundColor3 = Color3.fromRGB(30, 40, 55)
StatusFrame.Size = UDim2.new(1, 0, 0, 80)

local StatusCorner = Instance.new("UICorner")
StatusCorner.CornerRadius = UDim.new(0, 8)
StatusCorner.Parent = StatusFrame

local StatusTitle = Instance.new("TextLabel")
StatusTitle.Name = "StatusTitle"
StatusTitle.Parent = StatusFrame
StatusTitle.BackgroundTransparency = 1
StatusTitle.Size = UDim2.new(1, 0, 0, 30)
StatusTitle.Position = UDim2.new(0, 10, 0, 5)
StatusTitle.Font = Enum.Font.GothamBold
StatusTitle.Text = "СТАТУС ЗАЩИТЫ"
StatusTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
StatusTitle.TextSize = 16
StatusTitle.TextXAlignment = Enum.TextXAlignment.Left

local StatusIndicator = Instance.new("Frame")
StatusIndicator.Name = "StatusIndicator"
StatusIndicator.Parent = StatusFrame
StatusIndicator.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
StatusIndicator.Size = UDim2.new(0, 15, 0, 15)
StatusIndicator.Position = UDim2.new(0, 15, 0, 40)

local IndicatorCorner = Instance.new("UICorner")
IndicatorCorner.CornerRadius = UDim.new(1, 0)
IndicatorCorner.Parent = StatusIndicator

local StatusText = Instance.new("TextLabel")
StatusText.Name = "StatusText"
StatusText.Parent = StatusFrame
StatusText.BackgroundTransparency = 1
StatusText.Size = UDim2.new(0.8, 0, 0, 20)
StatusText.Position = UDim2.new(0, 40, 0, 38)
StatusText.Font = Enum.Font.Gotham
StatusText.Text = "ЗАЩИТА АКТИВНА"
StatusText.TextColor3 = Color3.fromRGB(0, 255, 100)
StatusText.TextSize = 14
StatusText.TextXAlignment = Enum.TextXAlignment.Left

-- Панель модулей защиты
local ModulesFrame = Instance.new("Frame")
ModulesFrame.Name = "ModulesFrame"
ModulesFrame.Parent = Content
ModulesFrame.BackgroundColor3 = Color3.fromRGB(30, 40, 55)
ModulesFrame.Position = UDim2.new(0, 0, 0, 90)
ModulesFrame.Size = UDim2.new(1, 0, 0, 300)

local ModulesCorner = Instance.new("UICorner")
ModulesCorner.CornerRadius = UDim.new(0, 8)
ModulesCorner.Parent = ModulesFrame

local ModulesTitle = Instance.new("TextLabel")
ModulesTitle.Name = "ModulesTitle"
ModulesTitle.Parent = ModulesFrame
ModulesTitle.BackgroundTransparency = 1
ModulesTitle.Size = UDim2.new(1, 0, 0, 30)
ModulesTitle.Position = UDim2.new(0, 10, 0, 5)
ModulesTitle.Font = Enum.Font.GothamBold
ModulesTitle.Text = "МОДУЛИ ЗАЩИТЫ"
ModulesTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
ModulesTitle.TextSize = 16
ModulesTitle.TextXAlignment = Enum.TextXAlignment.Left

-- Список модулей
local ModulesList = Instance.new("ScrollingFrame")
ModulesList.Name = "ModulesList"
ModulesList.Parent = ModulesFrame
ModulesList.BackgroundTransparency = 1
ModulesList.Size = UDim2.new(1, -10, 1, -40)
ModulesList.Position = UDim2.new(0, 5, 0, 35)
ModulesList.ScrollBarThickness = 5
ModulesList.CanvasSize = UDim2.new(0, 0, 0, 0)
ModulesList.AutomaticCanvasSize = Enum.AutomaticSize.Y

-- Создаем модули защиты
local protectionModules = {
    {Name = "АНТИКИК", Enabled = true, Color = Color3.fromRGB(255, 100, 100)},
    {Name = "АНТИГРАБ", Enabled = true, Color = Color3.fromRGB(100, 200, 255)},
    {Name = "АНТИТЕЛЕПОРТ", Enabled = true, Color = Color3.fromRGB(255, 200, 100)},
    {Name = "АНТИФЛИНГ", Enabled = true, Color = Color3.fromRGB(100, 255, 150)},
    {Name = "АНТИСТАН", Enabled = true, Color = Color3.fromRGB(200, 100, 255)},
    {Name = "АНТИ-БЕЗДНА", Enabled = true, Color = Color3.fromRGB(255, 255, 100)},
    {Name = "ЗАЩИТА ИНСТРУМЕНТОВ", Enabled = true, Color = Color3.fromRGB(100, 255, 255)},
    {Name = "АВТО-РЕСПАВН", Enabled = true, Color = Color3.fromRGB(255, 150, 100)}
}

local moduleButtons = {}

for i, module in ipairs(protectionModules) do
    local ModuleButton = Instance.new("TextButton")
    ModuleButton.Name = "Module_" .. module.Name
    ModuleButton.Parent = ModulesList
    ModuleButton.BackgroundColor3 = module.Enabled and Color3.fromRGB(40, 50, 70) or Color3.fromRGB(30, 30, 40)
    ModuleButton.Size = UDim2.new(1, -10, 0, 40)
    ModuleButton.Position = UDim2.new(0, 5, 0, (i-1) * 45)
    ModuleButton.Font = Enum.Font.Gotham
    ModuleButton.Text = module.Name
    ModuleButton.TextColor3 = module.Enabled and Color3.fromRGB(255, 255, 255) or Color3.fromRGB(150, 150, 150)
    ModuleButton.TextSize = 14
    ModuleButton.AutoButtonColor = false
    
    local ModuleCorner = Instance.new("UICorner")
    ModuleCorner.CornerRadius = UDim.new(0, 6)
    ModuleCorner.Parent = ModuleButton
    
    local StatusDot = Instance.new("Frame")
    StatusDot.Name = "StatusDot"
    StatusDot.Parent = ModuleButton
    StatusDot.BackgroundColor3 = module.Enabled and module.Color or Color3.fromRGB(100, 100, 100)
    StatusDot.Size = UDim2.new(0, 10, 0, 10)
    StatusDot.Position = UDim2.new(0.92, 0, 0.5, -5)
    
    local DotCorner = Instance.new("UICorner")
    DotCorner.CornerRadius = UDim.new(1, 0)
    DotCorner.Parent = StatusDot
    
    moduleButtons[module.Name] = {
        Button = ModuleButton,
        Dot = StatusDot,
        Enabled = module.Enabled
    }
    
    -- Обработчик клика
    ModuleButton.MouseButton1Click:Connect(function()
        module.Enabled = not module.Enabled
        moduleButtons[module.Name].Enabled = module.Enabled
        
        if module.Enabled then
            ModuleButton.BackgroundColor3 = Color3.fromRGB(40, 50, 70)
            ModuleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            StatusDot.BackgroundColor3 = module.Color
        else
            ModuleButton.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
            ModuleButton.TextColor3 = Color3.fromRGB(150, 150, 150)
            StatusDot.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        end
        
        -- Здесь будет включение/выключение реальной защиты
        print("Модуль " .. module.Name .. (module.Enabled and " включен" or " выключен"))
    end)
end

-- Кнопки управления
local ButtonsFrame = Instance.new("Frame")
ButtonsFrame.Name = "ButtonsFrame"
ButtonsFrame.Parent = Content
ButtonsFrame.BackgroundTransparency = 1
ButtonsFrame.Position = UDim2.new(0, 0, 0, 400)
ButtonsFrame.Size = UDim2.new(1, 0, 0, 50)

local function createActionButton(name, text, position, color)
    local button = Instance.new("TextButton")
    button.Name = name
    button.Parent = ButtonsFrame
    button.BackgroundColor3 = color
    button.Size = UDim2.new(0.48, 0, 0, 40)
    button.Position = position
    button.Font = Enum.Font.GothamBold
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 14
    button.AutoButtonColor = false
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 6)
    buttonCorner.Parent = button
    
    return button
end

local RestoreBtn = createActionButton("RestoreBtn", "ВОССТАНОВИТЬ", UDim2.new(0, 0, 0, 0), Color3.fromRGB(0, 150, 255))
local RefreshBtn = createActionButton("RefreshBtn", "ОБНОВИТЬ", UDim2.new(0.52, 0, 0, 0), Color3.fromRGB(50, 150, 50))

-- Анимации кнопок
CloseButton.MouseEnter:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 100, 100)}):Play()
end)

CloseButton.MouseLeave:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(255, 60, 60)}):Play()
end)

RestoreBtn.MouseEnter:Connect(function()
    TweenService:Create(RestoreBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 180, 255)}):Play()
end)

RestoreBtn.MouseLeave:Connect(function()
    TweenService:Create(RestoreBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(0, 150, 255)}):Play()
end)

RefreshBtn.MouseEnter:Connect(function()
    TweenService:Create(RefreshBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(70, 180, 70)}):Play()
end)

RefreshBtn.MouseLeave:Connect(function()
    TweenService:Create(RefreshBtn, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(50, 150, 50)}):Play()
end)

-- Обработчики кнопок
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

RestoreBtn.MouseButton1Click:Connect(function()
    -- Восстановление позиции
    local character = Player.Character
    if character and character:FindFirstChild("HumanoidRootPart") then
        character.HumanoidRootPart.CFrame = CFrame.new(0, 50, 0)
        print("Позиция восстановлена")
    end
end)

RefreshBtn.MouseButton1Click:Connect(function()
    -- Обновление статуса
    StatusIndicator.BackgroundColor3 = Color3.fromRGB(0, 255, 100)
    StatusText.Text = "ЗАЩИТА АКТИВНА • " .. #protectionModules .. " модулей"
    print("Статус обновлен")
end)

-- Горячая клавиша для открытия/закрытия интерфейса
local uiVisible = true
UserInputService.InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.Insert then
        uiVisible = not uiVisible
        MainFrame.Visible = uiVisible
    end
end)

-- Автоматическое обновление статуса
spawn(function()
    while true do
        wait(5)
        local activeModules = 0
        for _, module in ipairs(protectionModules) do
            if module.Enabled then
                activeModules = activeModules + 1
            end
        end
        
        StatusText.Text = "АКТИВНО • " .. activeModules .. "/" .. #protectionModules .. " модулей"
    end
end)

-- Показываем сообщение о запуске
print("========================================")
print("GGH PROTECTION UI v1.0")
print("Интерфейс защиты успешно запущен!")
print("Нажмите INSERT для скрытия/показа")
print("========================================")

-- Возвращаем управление интерфейсом
local GGH_UI = {
    Toggle = function(visible)
        MainFrame.Visible = visible
        uiVisible = visible
    end,
    
    SetStatus = function(status, color)
        StatusText.Text = status
        StatusIndicator.BackgroundColor3 = color
    end,
    
    GetModuleState = function(moduleName)
        for _, module in ipairs(protectionModules) do
            if module.Name == moduleName then
                return module.Enabled
            end
        end
        return false
    end,
    
    ToggleModule = function(moduleName, state)
        for _, module in ipairs(protectionModules) do
            if module.Name == moduleName then
                module.Enabled = state
                if moduleButtons[moduleName] then
                    if state then
                        moduleButtons[moduleName].Button.BackgroundColor3 = Color3.fromRGB(40, 50, 70)
                        moduleButtons[moduleName].Button.TextColor3 = Color3.fromRGB(255, 255, 255)
                        moduleButtons[moduleName].Dot.BackgroundColor3 = module.Color
                    else
                        moduleButtons[moduleName].Button.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
                        moduleButtons[moduleName].Button.TextColor3 = Color3.fromRGB(150, 150, 150)
                        moduleButtons[moduleName].Dot.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
                    end
                end
                return true
            end
        end
        return false
    end
}

return GGH_UI
